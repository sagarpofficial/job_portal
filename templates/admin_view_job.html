{% extends "admin_base.html" %}
{% block content %}

<style>
  .card {
    background: #ffffff;
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 25px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  }

  .section-title {
    font-size: 20px;
    color: #1e3a8a;
    font-weight: 700;
    margin-bottom: 12px;
    padding-bottom: 6px;
    border-bottom: 2px solid #1e3a8a;
  }

  .row-item {
    margin-bottom: 8px;
    font-size: 15px;
  }

  .label {
    font-weight: 600;
    color: #111827;
  }

  .value {
    color: #374151;
    margin-left: 6px;
  }

  .action-bar {
    margin-top: 30px;
    text-align: center;
  }

  .btn-action {
    padding: 10px 18px;
    border-radius: 6px;
    text-decoration: none;
    color: #fff;
    font-weight: 600;
    margin-right: 12px;
  }

  .btn-approve { background: #16a34a; }
  .btn-approve:hover { background: #0f7a37; }

  .btn-reject { background: #dc2626; }
  .btn-reject:hover { background: #b91c1c; }

  .btn-back { background: #6b7280; }
  .btn-back:hover { background: #4b5563; }
</style>


<!-- ===================== JOB DETAILS ===================== -->
<div class="card">
  <div class="section-title">üìù Job Details</div>

  <div class="row-item"><span class="label">Title:</span><span class="value">{{ job.title }}</span></div>
  <div class="row-item"><span class="label">Category:</span><span class="value">{{ job.category }}</span></div>
  <div class="row-item"><span class="label">Type:</span><span class="value">{{ job.job_type }}</span></div>
  <div class="row-item"><span class="label">Location:</span><span class="value">{{ job.location }}</span></div>
  <div class="row-item"><span class="label">Salary:</span><span class="value">{{ job.salary }}</span></div>

  {% if job.job_type == "large" %}
    <div class="row-item"><span class="label">Qualification:</span><span class="value">{{ job.qualification }}</span></div>
    <div class="row-item"><span class="label">Experience:</span><span class="value">{{ job.experience }}</span></div>
    <div class="row-item"><span class="label">Benefits:</span><span class="value">{{ job.benefits }}</span></div>
  {% endif %}

  <div class="row-item"><span class="label">Description:</span><span class="value">{{ job.description }}</span></div>
</div>


<!-- ===================== SMALL JOB EXTRA DETAILS ===================== -->
{% if job.job_type == "small" %}
<div class="card">
  <div class="section-title">üîí Safety & Field Details</div>

  <div class="row-item"><span class="label">Salary Type:</span><span class="value">{{ job.salary_type }}</span></div>
  <div class="row-item"><span class="label">Workplace Type:</span><span class="value">{{ job.workplace_type }}</span></div>
  <div class="row-item"><span class="label">Full Address:</span><span class="value">{{ job.full_address }}</span></div>
  <div class="row-item"><span class="label">Pincode:</span><span class="value">{{ job.pincode }}</span></div>
  <div class="row-item"><span class="label">Risk Level:</span><span class="value">{{ job.risk_level }}</span></div>
  <div class="row-item"><span class="label">Tools Provided:</span><span class="value">{{ 'Yes' if job.tools_provided else 'No' }}</span></div>
  <div class="row-item"><span class="label">Food Provided:</span><span class="value">{{ 'Yes' if job.food_provided else 'No' }}</span></div>
  <div class="row-item"><span class="label">Stay Provided:</span><span class="value">{{ 'Yes' if job.stay_provided else 'No' }}</span></div>

  {% if job.google_map_link %}
    <div class="row-item">
      <span class="label">Location:</span>
      <a target="_blank"
         href="{% if job.google_map_link.startswith('http') %}
                 {{ job.google_map_link }}
               {% else %}
                 https://www.google.com/maps/search/{{ job.google_map_link | replace(' ', '+') }}
               {% endif %}"
         style="color:#2563eb; font-weight:600;">
        Open Location ‚Üí
      </a>
    </div>
  {% endif %}
</div>
{% endif %}


<!-- ===================== LARGE JOB COMPANY INFO ===================== -->
{% if job.job_type == "large" %}
<div class="card">
  <div class="section-title">üè¢ Company Details</div>

  <div class="row-item"><span class="label">Company Name:</span><span class="value">{{ job.company_name }}</span></div>
  <div class="row-item"><span class="label">Email:</span><span class="value">{{ job.company_email }}</span></div>
  <div class="row-item"><span class="label">Phone:</span><span class="value">{{ job.company_phone }}</span></div>
  <div class="row-item">
    <span class="label">Website:</span>
    <a href="{{ job.company_website }}" target="_blank" style="color:#2563eb;">
      {{ job.company_website }}
    </a>
  </div>
  <div class="row-item"><span class="label">Address:</span><span class="value">{{ job.company_address }}</span></div>
</div>
{% endif %}


<!-- ===================== POSTER DETAILS ===================== -->
<div class="card">
  <div class="section-title">üë§ Job Poster</div>

  <div class="row-item"><span class="label">Name:</span><span class="value">{{ poster.name if poster else 'Unknown' }}</span></div>
  <div class="row-item"><span class="label">Email:</span><span class="value">{{ poster.email if poster else 'Unknown' }}</span></div>
  <div class="row-item"><span class="label">Phone:</span><span class="value">{{ poster.phone if poster else 'Unknown' }}</span></div>

  <div class="row-item">
    <span class="label">Joined:</span>
    <span class="value">{{ poster.created_at.strftime('%Y-%m-%d') if poster else 'N/A' }}</span>
  </div>
</div>


<!-- ===================== ACTION BUTTONS ===================== -->
<div class="action-bar">
  <a href="{{ url_for('approve_job', job_id=job.id) }}" class="btn-action btn-approve">‚úî Approve</a>
  <a href="{{ url_for('reject_job', job_id=job.id) }}" class="btn-action btn-reject">‚úñ Reject</a>
  <a href="{{ url_for('admin_dashboard') }}" class="btn-action btn-back">‚Üê Back</a>
</div>

{% endblock %}