{% extends "base.html" %}
{% block content %}

<style>
/* ---- DASHBOARD LAYOUT ---- */
.dashboard-wrapper {
    max-width: 1200px;
    margin: 30px auto;
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 25px;
}

/* ---- LEFT SIDEBAR ---- */
.sidebar {
    background: white;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.sidebar h3 {
    margin-bottom: 20px;
    font-size: 20px;
    color: #1f2937;
}

.sidebar-item {
    padding: 12px 14px;
    margin-bottom: 10px;
    border-radius: 8px;
    background: #f3f4f6;
    color: #111827;
    font-weight: 500;
}

.sidebar-item strong {
    color: #2563eb;
}

/* ---- MAIN CONTENT ---- */
.main-content {
    background: white;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.section-title {
    font-size: 22px;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 18px;
}

/* ---- JOB TABLE ---- */
.job-table {
    width: 100%;
    border-collapse: collapse;
}

.job-table th {
    padding: 12px;
    background: #2563eb;
    color: white;
    text-align: left;
}

.job-table td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
}

.status-pill {
    padding: 6px 10px;
    border-radius: 6px;
    color: white;
    font-size: 12px;
    font-weight: 600;
}

.status-approved { background: #059669; }
.status-pending { background: #d97706; }
.status-rejected { background: #dc2626; }

.action-btn {
    padding: 6px 12px;
    border-radius: 6px;
    background: #2563eb;
    color: white;
    text-decoration: none;
    font-size: 13px;
}

.action-btn:hover {
    background: #1e3a8a;
}
</style>

<div class="dashboard-wrapper">

    <!-- =================== SIDEBAR =================== -->
    <div class="sidebar">
        <h3>ðŸ‘¤ Employer Profile</h3>

        <div class="sidebar-item"><strong>Name:</strong> {{ user.name }}</div>
        <div class="sidebar-item"><strong>Email:</strong> {{ user.email }}</div>
        <div class="sidebar-item"><strong>Phone:</strong> {{ user.phone }}</div>

        {% if user.address %}
        <div class="sidebar-item"><strong>Address:</strong> {{ user.address }}</div>
        {% endif %}
    </div>


    <!-- =================== MAIN CONTENT =================== -->
    <div class="main-content">
        
        <div class="section-title">ðŸ“‹ Your Posted Jobs</div>

        {% if jobs %}
        <table class="job-table">
            <tr>
                <th>Job Title</th>
                <th>Status</th>
                <th>Applicants</th>
                <th>Action</th>
            </tr>

            {% for job in jobs %}
            {% set apps = applicants.get(job.id, []) %}
            
            <tr>
                <td>{{ job.title }}</td>

                <td>
                    {% if job.status == 'Approved' %}
                        <span class="status-pill status-approved">Approved</span>
                    {% elif job.status == 'Pending' %}
                        <span class="status-pill status-pending">Pending</span>
                    {% else %}
                        <span class="status-pill status-rejected">Rejected</span>
                    {% endif %}
                </td>

                <td>
                    {{ apps|length }}

                    {% if apps|length > 0 %}
                        <a href="{{ url_for('view_applicants', job_id=job.id) }}"
                           class="action-btn"
                           style="margin-left:8px;">
                           View Applicants
                        </a>
                    {% endif %}
                </td>

                <td>
                    <a class="action-btn" href="{{ url_for('job_details', job_id=job.id) }}">
                        View Job
                    </a>
                </td>
            </tr>

            {% endfor %}
        </table>

        {% else %}
            <p style="color:#6b7280; font-size:16px;">No jobs posted yet.</p>
        {% endif %}
    </div>

</div>

{% endblock %}