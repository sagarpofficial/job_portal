{% extends "base.html" %}
{% block content %}

<style>
.applicant-card {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
}

.title {
    font-size: 24px;
    font-weight: 700;
    color: #1f2937;
    border-bottom: 2px solid #2563eb;
    padding-bottom: 10px;
    margin-bottom: 25px;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table th {
    background: #2563eb;
    color: white;
    padding: 12px;
    font-size: 14px;
}

.table td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
    font-size: 14px;
}

.status-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.status-pending { background:#fef3c7; color:#92400e; }
.status-viewed { background:#dbeafe; color:#1e40af; }
.status-selected { background:#dcfce7; color:#166534; }
.status-rejected { background:#fee2e2; color:#991b1b; }

.hidden-text {
    color: #9ca3af;
    font-style: italic;
}

.resume-link {
    color: #2563eb;
    font-weight: 600;
}

.back-btn {
    margin-top: 25px;
    display: inline-block;
    padding: 10px 18px;
    background: #2563eb;
    color: white;
    border-radius: 8px;
    text-decoration: none;
}
</style>

<div class="applicant-card">
    <div class="title">üë• Applicants for "{{ job.title }}"</div>

    {% if applicants %}
    <table class="table">
        <tr>
            <th>Name</th>
            <th>Applied On</th>
            <th>Status</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Resume</th>
            <th>Action</th>
        </tr>

        {% for app in applicants %}
        <tr>
            <td>{{ app.full_name }}</td>
            <td>{{ app.applied_at.strftime('%d %b %Y') }}</td>

            <td>
                <span class="status-badge status-{{ app.status|lower }}">
                    {{ app.status }}
                </span>
            </td>

            {% if app.status in ['Viewed','Selected'] %}
                <td>{{ app.email }}</td>
                <td>{{ app.phone }}</td>
                <td>
                    {% if app.resume %}
                        <a class="resume-link"
                           href="{{ url_for('download_resume', filename=app.resume) }}">
                           Download
                        </a>
                    {% endif %}
                </td>
            {% else %}
                <td colspan="3" class="hidden-text">Hidden until viewed</td>
            {% endif %}

            <td>
                {% if app.status not in ['Selected','Rejected'] %}
                    <a href="{{ url_for('select_application', app_id=app.id) }}"
                       style="color:green;font-weight:600;">Select</a>
                    |
                    <a href="{{ url_for('reject_application', app_id=app.id) }}"
                       style="color:red;font-weight:600;">Reject</a>
                {% else %}
                    ‚Äî
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No applications yet.</p>
    {% endif %}

    <a href="{{ url_for('profile') }}" class="back-btn">‚Üê Back to Profile</a>
</div>

{% endblock %}